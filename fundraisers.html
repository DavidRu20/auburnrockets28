<!doctype html> 
<html lang="en" data-theme="dark" class="force-dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AHS Class of ‚Äô28 ‚Äî Fundraisers</title>
  <meta name="theme-color" content="#0d6efd" />
  <meta name="color-scheme" content="dark" />
  <link rel="stylesheet" href="styles.css" />

  <style>
    /* --- Header hardening: consistent layout + reliable mobile menu (same as Announcements) --- */
    .nav{ display:flex; align-items:center; justify-content:space-between; gap:12px; }
    .links{ display:flex; align-items:center; gap:16px; flex-wrap:nowrap; white-space:nowrap; }
    .menu-btn{ display:none; }
    @media (max-width:980px){
      .header .links{ display:none; }
      .menu-btn{
        display:inline-flex; align-items:center; justify-content:center;
        width:42px; height:42px; border-radius:12px; border:1px solid var(--border);
        background:var(--panel);
      }
    }
    .mobile-menu{
      position:fixed; inset:64px 10px auto 10px; z-index:9999;
      background:var(--panel); border:1px solid var(--border);
      border-radius:14px; box-shadow:var(--shadow-2); padding:12px;
      backdrop-filter:blur(10px);
    }
    .mobile-menu a{ display:block; padding:12px 10px; border-radius:10px; color:var(--text); }
    .mobile-menu a:hover{ background:rgba(255,255,255,.06); }
    .hidden{ display:none !important; }
    html.menu-open, body.menu-open { overflow:hidden; }

    /* Page base (match Announcements background + remove horizontal scroll) */
    :root { color-scheme: dark light; }
    html, body { max-width:100%; overflow-x:hidden; }
    body{
      margin:0; font-family:Arial,system-ui,Segoe UI,Roboto,sans-serif;
      color:var(--text);
      background: transparent;
    }

    /* Starfield canvas */
    #starfield{
      position:fixed; inset:0; z-index:-1; width:100%; height:100%;
      pointer-events:none; display:block;
    }

    /* Layout */
    .section{ padding:60px 20px; text-align:center; }
    .fundraiser-title{ font-size:clamp(2rem,4.5vw,3rem); margin:0 0 10px; }
    .fundraiser-sub{ font-size:1.1rem; margin:0 0 40px; opacity:.9; }

    .fundraiser-grid{
      display:grid; gap:30px; justify-items:center;
      grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
      align-items:stretch;
    }
    .fundraiser-box{
      background: rgba(255,255,255,0.07);
      border-radius:20px; padding:20px; width:100%; max-width:350px;
      transition: transform .35s var(--t-base), box-shadow .35s var(--t-base), background .35s var(--t-base);
      box-shadow: 0 0 25px rgba(0,0,0,.25); text-align:center; margin:auto;
      will-change: transform;
      border:1px solid var(--border);
      backdrop-filter: blur(6px);
    }
    .fundraiser-box h2{ margin:6px 0 8px; }

    @media (hover:hover){
      .crumbl:hover{ transform: rotate3d(1,1,0,8deg) scale(1.05); box-shadow:0 0 18px rgba(255,215,0,.6); background: rgba(255,215,0,.12); }
      .panera:hover{ transform: scale(1.06) rotate(-6deg); box-shadow:0 0 22px rgba(0,255,150,.55); background: rgba(0,255,150,.12); }
      .leaves:hover{ transform: translateY(-6px) rotate(2deg) skewX(1deg); box-shadow:0 0 20px rgba(255,140,0,.45); background: rgba(255,140,0,.12); animation: leaf-sway .7s ease-in-out infinite alternate; }
      .mystery:hover{ transform: rotateY(180deg); box-shadow:0 0 24px rgba(150,0,255,.55); background: rgba(150,0,255,.12); }
    }
    @keyframes leaf-sway{
      0%{ transform: translateY(-6px) rotate(2deg) skewX(1deg); }
      50%{ transform: translateY(-8px) rotate(-3deg) skewX(-1deg); }
      100%{ transform: translateY(-6px) rotate(2deg) skewX(1deg); }
    }

    .countdown{ font-size:1.05rem; margin-top:10px; font-weight:700; letter-spacing:.2px; }
    .promo{
      margin-top:16px; font-size:1rem; background: rgba(255,255,255,.12);
      padding:10px; border-radius:10px; border:1px solid rgba(255,255,255,.35);
      color:#ffd700; font-weight:800;
    }

    .goal-container{ margin-top:50px; text-align:center; }
    .goal-bar{
      position:relative; height:40px; margin:10px auto; width:min(860px,80%);
      background: rgba(255,255,255,.10); border-radius:20px; overflow:hidden;
      border:2px solid rgba(255,255,255,.28);
    }
    .goal-fill{
      position:absolute; left:0; top:0; bottom:0; width:0%;
      background: linear-gradient(90deg, var(--blue), var(--blue-2));
      box-shadow: inset 0 0 14px rgba(255,255,255,.18);
      transition: width .6s var(--t-base);
    }
    .rocket{
      position:absolute; top:50%; transform:translate(-50%,-50%);
      transition: left .6s var(--t-base); font-size:1.5rem;
      filter: drop-shadow(0 0 8px rgba(255,255,255,.3));
    }
    .goal-text{ margin-top:8px; font-size:1rem; color:#ffd700; }

    @media (max-width:480px){
      .fundraiser-box{ padding:16px; max-width:92%; font-size:.95rem; }
    }

    /* ===== FORCE DARK LOOK, ALWAYS (pins your dark palette) ===== */
    html.force-dark {
      --bg: #0b0e1a;
      --text: #e8efff;
      --muted: #a9b7d0;
      --panel: rgba(20,24,38,.78);
      --panel-solid: #141826;
      --border: rgba(255,255,255,.08);
      --shadow-1: 0 6px 16px rgba(0,0,0,.35);
      --shadow-2: 0 14px 40px rgba(0,0,0,.45);
      --brand: #0d6efd;
      --danger: #ff4d4f;
      --header-bg: rgba(15,18,30,.72);
      --header-border: rgba(255,255,255,.06);
      color-scheme: dark; /* dark form controls/scrollbars */
    }
  </style>

  <!-- Pin theme early (optional safety) -->
  <script>
    document.documentElement.setAttribute('data-theme','dark');
    document.documentElement.classList.add('force-dark');
  </script>
</head>
<body>

  <!-- Background -->
  <canvas id="starfield" aria-hidden="true"></canvas>

  <!-- Header / Nav (identical to Announcements) -->
  <header class="header" role="banner">
    <nav class="nav" aria-label="Primary">
      <a class="brand" href="./index.html" aria-label="AHS Class of 2028 ‚Äî Home">
        <span class="logo" aria-hidden="true">A</span>
        AHS Class of ‚Äô28
      </a>

      <div class="links" role="navigation">
        <a href="./index.html">Home</a>
        <a class="active" href="./fundraisers.html" aria-current="page">Fundraisers</a>
        <a href="./calendar.html">Calendar</a>
        <a href="./media.html">Media</a>
        <a href="./achievements.html">Achievements</a>
        <a href="./about.html">About</a>
        <a href="./contact.html">Contact</a>
        <a href="./shop.html">Shop</a>
        <a href="./announcements.html">Announcements</a>
        <a href="./community.html">Community</a>
      </div>

      <button id="menuBtn" class="menu-btn" aria-expanded="false"
              aria-controls="mobileMenu" aria-label="Open menu">‚ò∞</button>
    </nav>

    <div id="mobileMenu" class="mobile-menu hidden" role="dialog" aria-modal="true" aria-label="Mobile navigation">
      <a href="./index.html">Home</a>
      <a class="active" href="./fundraisers.html" aria-current="page">Fundraisers</a>
      <a href="./calendar.html">Calendar</a>
      <a href="./media.html">Media</a>
      <a href="./achievements.html">Achievements</a>
      <a href="./about.html">About</a>
      <a href="./contact.html">Contact</a>
      <a href="./shop.html">Shop</a>
      <a href="./announcements.html">Announcements</a>
      <a href="./community.html">Community</a>
      <div class="small" style="padding:8px 10px; opacity:.8">Tap outside to close</div>
    </div>
  </header>

  <main class="section">
    <h1 class="fundraiser-title">FUNDRAISER</h1>
    <p class="fundraiser-sub">Support our class by participating in our latest fundraisers!</p>

    <div class="fundraiser-grid">
      <div class="fundraiser-box crumbl" onclick="window.location.href='rocket.html'" style="cursor:pointer" data-deadline="2025-09-08T00:00:00-04:00">
        <h2>üç™ Crumbl Cookie</h2>
        <p>Help support the Class of 2028 by purchasing delicious Crumbl Cookies!</p>
        <div class="countdown" id="cd-crumbl">‚Äî</div>
        <div class="promo">Promo Code: _____</div>
      </div>

      <div class="fundraiser-box panera" data-deadline="">
        <h2>ü•ñ Panera Bread</h2>
        <p>Enjoy fresh food while helping our fundraiser!</p>
        <div class="countdown" id="cd-panera">TBA</div>
        <div class="promo">Promo Code: _____</div>
      </div>

      <div class="fundraiser-box leaves" data-deadline="">
        <h2>üçÇ Raking Leaves</h2>
        <p>Sign up to help with raking leaves and raise funds.</p>
        <div class="countdown" id="cd-leaves">TBA</div>
      </div>

      <div class="fundraiser-box mystery">
        <h2>‚ùì Mystery Fundraiser</h2>
        <p>Details coming soon‚Ä¶</p>
        <div class="countdown">TBA</div>
      </div>
    </div>

    <div class="goal-container" aria-live="polite">
      <div class="goal-bar" aria-label="Fundraising progress toward goal">
        <div class="goal-fill" id="goalFill"></div>
        <div class="rocket" id="rocket" role="img" aria-label="Rocket position">üöÄ</div>
      </div>
      <div class="goal-text" id="goalText">$0 / $10,000</div>
    </div>
  </main>

  <!-- Mobile Menu Script (same as Announcements) -->
  <script>
    (function(){
      const btn  = document.getElementById('menuBtn');
      const menu = document.getElementById('mobileMenu');
      if (!btn || !menu) return;
      if (btn.dataset.bound === "1") return; // avoid double-binding
      btn.dataset.bound = "1";

      const DESKTOP_W = 980;
      let open = false;
      function setOpen(v){
        open = v;
        menu.classList.toggle('hidden', !open);
        btn.setAttribute('aria-expanded', String(open));
        document.documentElement.classList.toggle('menu-open', open);
        document.body.classList.toggle('menu-open', open);
      }

      btn.addEventListener('click', (e)=>{ e.stopPropagation(); setOpen(!open); }, {passive:true});
      document.addEventListener('click', (e)=>{ if(open && !menu.contains(e.target) && e.target !== btn) setOpen(false); });
      document.addEventListener('keydown', (e)=>{ if (e.key === 'Escape') setOpen(false); });
      menu.addEventListener('click', (e)=>{ if (e.target.closest('a')) setOpen(false); });
      window.addEventListener('resize', ()=>{ if (innerWidth > DESKTOP_W) setOpen(false); });
    })();
  </script>

  <!-- Starfield Background (identical gradient/colors to Announcements) -->
  <script>
    (function(){
      const cvs = document.getElementById('starfield');
      if(!cvs) return;
      const ctx = cvs.getContext('2d', { alpha:false }); // solid background like Announcements
      let stars=[];
      function resize(){
        cvs.width = innerWidth; cvs.height = innerHeight;
        stars = Array.from({length:200},()=>({
          x:Math.random()*cvs.width, y:Math.random()*cvs.height,
          r:Math.random()*1.6, v:Math.random()*0.3+0.05
        }));
      }
      addEventListener('resize', resize); resize();
      (function tick(){
        const light = document.documentElement.getAttribute('data-theme')==='light';
        const g = ctx.createLinearGradient(0,0,0,cvs.height);
        if(light){ g.addColorStop(0,'#eaf2ff'); g.addColorStop(1,'#ffffff'); }
        else{ g.addColorStop(0,'#0b0e1a'); g.addColorStop(1,'#000'); }
        ctx.fillStyle=g; ctx.fillRect(0,0,cvs.width,cvs.height);
        ctx.fillStyle = light? 'rgba(60,90,140,.85)':'rgba(180,200,255,.85)';
        for(const s of stars){
          ctx.beginPath(); ctx.arc(s.x,s.y,s.r,0,Math.PI*2); ctx.fill();
          s.y+=s.v; if(s.y>cvs.height){ s.y=-2; s.x=Math.random()*cvs.width; }
        }
        requestAnimationFrame(tick);
      })();
    })();
  </script>

  <!-- Fundraiser logic (unchanged) -->
  <script>
    function startCountdown(el, iso){
      if(!iso){ el.textContent = 'TBA'; return; }
      const target = new Date(iso).getTime();
      const tick = ()=>{
        const now = Date.now();
        const diff = target - now;
        if (diff <= 0){ el.textContent = 'Ended'; return; }
        const d = Math.floor(diff / 86400000);
        const h = Math.floor((diff % 86400000) / 3600000);
        const m = Math.floor((diff % 3600000) / 60000);
        const s = Math.floor((diff % 60000) / 1000);
        el.textContent = `${d}d ${String(h).padStart(2,'0')}h ${String(m).padStart(2,'0')}m ${String(s).padStart(2,'0')}s`;
        requestAnimationFrame(()=> setTimeout(tick, 1000));
      };
      tick();
    }

    startCountdown(document.getElementById('cd-crumbl'),
                   document.querySelector('.crumbl')?.dataset.deadline);
    startCountdown(document.getElementById('cd-panera'),
                   document.querySelector('.panera')?.dataset.deadline);
    startCountdown(document.getElementById('cd-leaves'),
                   document.querySelector('.leaves')?.dataset.deadline);

    let currentAmount = 0;     
    const goalAmount = 10000;

    function updateGoalBar(){
      const fill = document.getElementById('goalFill');
      const rocket = document.getElementById('rocket');
      const txt = document.getElementById('goalText');
      const pct = Math.min(currentAmount / goalAmount, 1);
      fill.style.width = (pct*100).toFixed(2) + '%';
      rocket.style.left = `calc(${(pct*100).toFixed(2)}% - 0px)`;
      txt.textContent = `$${currentAmount.toLocaleString()} / $${goalAmount.toLocaleString()}`;
    }
    updateGoalBar();

    // Call this from console or other scripts to update progress:
    window.setFundraiserProgress = (amount)=>{ currentAmount = Math.max(0, amount|0); updateGoalBar(); };
  </script>

  <script src="script.js" defer></script>
</body>
</html>

