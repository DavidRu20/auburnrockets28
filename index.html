<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AHS Class of ’28</title>
  <meta name="theme-color" content="#0d6efd" />
  <link rel="stylesheet" href="styles.css" />
  
  <!-- ============================ HEADER / NAV ============================ -->
  <header class="header" role="banner">
  <nav class="nav" aria-label="Primary">
    <a class="brand" href="./" aria-label="AHS Class of 2028 — Home">
      <span class="logo" aria-hidden="true">A</span>
      AHS Class of ’28
    </a>
   
    <!-- Desktop links -->
    <div class="links" role="navigation">
      <a class="active "href="./">Home</a>
      <a href="./fundraisers.html">Fundraisers</a>
      <a href="./calendar.html">Calendar</a>
      <a href="./media.html">Media</a>
      <a href="./achievements.html">Achievements</a>
      <a href="./about.html">About</a>
      <a href="./contact.html">Contact</a>
      <a href="./merch.html">Shop</a>
      <a href="./community.html">Community</a>
      <a href="./auth.html">Sign Up</a>
    </div>

    <!-- Mobile menu button -->
    <button id="menuBtn" class="menu-btn" aria-expanded="false"
            aria-controls="mobileMenu" aria-label="Open menu">☰</button>
  </nav>

    <script>
    fetch('/auth/check')
      .then(res => res.json())
      .then(data => {
        if (data.loggedIn) {
          document.querySelector('.links').insertAdjacentHTML('beforeend', 
            `<span style="margin-left: 1rem;">Welcome, ${data.user.name}</span> 
             <form action="/auth/logout" method="POST" style="display:inline;">
               <button style="background:none; border:none; color:#f00; cursor:pointer;">Log Out</button>
             </form>`
          );
        }
      });
    </script>

    <!-- Mobile menu -->
    <div id="mobileMenu" class="mobile-menu hidden" role="dialog" aria-modal="true" aria-label="Mobile navigation">
    <a href="./">Home</a>
    <a href="./fundraisers.html">Fundraisers</a>
    <a href="./calendar.html">Calendar</a>
    <a href="./media.html">Media</a>
    <a href="./achievements.html">Achievements</a>
    <a href="./about.html">About</a>
    <a href="./contact.html">Contact</a>
    <a href="./merch.html">Shop</a>
    <a href="./community.html">Community</a>
    <a href="./auth.html" style="color:#fff;">Sign Up</a>
    <div class="small" style="padding:8px 10px; opacity:.8">Tap outside to close</div>
  </div>
</header>

  <!-- ============================== HERO ================================= -->
  <main role="main">
    <section
      class="hero"
      id="home"
      aria-labelledby="homeTitle"
      data-end-of-school="2026-06-19T18:00:00-04:00"
      >
      <div class="card hover-up" style="max-width:820px; margin-inline:auto;">
        <h1 id="homeTitle">Auburn Class of ’28</h1>

        <!-- Live date/time (America/New_York) -->
        <p id="date" aria-live="polite">Loading date…</p>
        <p id="time" aria-live="polite">Loading time…</p>

        <!-- Countdown -->
        <div class="countdown" aria-label="Countdown to end of school">
          <div class="box" aria-label="Days remaining">
            <div class="num" id="cd-days">0</div>
            <div class="lbl">Days</div>
          </div>
          <div class="box" aria-label="Hours remaining">
            <div class="num" id="cd-hrs">00</div>
            <div class="lbl">Hours</div>
          </div>
          <div class="box" aria-label="Minutes remaining">
            <div class="num" id="cd-min">00</div>
            <div class="lbl">Minutes</div>
          </div>
          <div class="box" aria-label="Seconds remaining">
            <div class="num" id="cd-sec">00</div>
            <div class="lbl">Seconds</div>
          </div>
        </div>
        <!-- Quick actions -->
        <div class="inline" style="justify-content:center; margin-top:16px;">
          <a class="btn primary" href="./fundraisers.html">See What’s Live</a>
          <a class="btn" href="./calendar.html">Event Calendar</a>
        </div>
      </div>
    </section>

    <!-- ======================== STATUS / ANNOUNCEMENTS ==================== -->
    <section class="section">
      <div class="container">
        <div class="grid grid-2">
          <!-- Happening Now -->
          <article class="panel glass hover-up" aria-labelledby="nowTitle">
            <div class="fundraiser-header" style="display:flex;align-items:center;justify-content:space-between;">
              <h2 id="nowTitle" class="section-title">Happening Now</h2>
              <span class="badge live">LIVE</span>
            </div>
            <div class="card-list" id="nowList">
              <!-- JS will insert live items here -->
              <div class="small" style="color:var(--muted)">Nothing live yet. Check “Next Up”.</div>
            </div>
          </article>

          <!-- Next Up -->
          <article class="panel glass hover-up" aria-labelledby="nextTitle">
            <h2 id="nextTitle" class="section-title">Next Up</h2>
            <div id="nextContainer">
              <!-- JS will insert next upcoming fundraiser here -->
              <div class="small" style="color:var(--muted)">No upcoming fundraisers yet.</div>
            </div>
          </article>
        </div>
      </div>
    </section>

    <!-- ============================ QUICK LINKS =========================== -->
    <section class="section">
      <div class="container">
        <h2 class="section-title">Quick Links</h2>
        <p class="section-sub">Fast access to the most-used pages.</p>

        <div class="grid grid-3">
          <a class="panel hover-up" href="./fundraisers.html">
            <div class="chips"><span class="badge blue">Fundraisers</span></div>
            <h3 style="margin:8px 0 6px;">Current & Upcoming</h3>
            <p class="small">See what’s running, what’s next, and how to help.</p>
          </a>

          <a class="panel hover-up" href="./calendar.html">
            <div class="chips"><span class="badge">Calendar</span></div>
            <h3 style="margin:8px 0 6px;">Events & No-School Days</h3>
            <p class="small">Today highlighted • Next & previous events called out.</p>
          </a>

          <a class="panel hover-up" href="./media.html">
            <div class="chips"><span class="badge">Media</span></div>
            <h3 style="margin:8px 0 6px;">Photos & Videos</h3>
            <p class="small">Instagram + YouTube vibes • Submit for approval.</p>
          </a>
        </div>
      </div>
    </section>

    
  <!-- ============================= FOOTER ================================ -->
  <footer class="footer">
    <div class="container">
      <div class="small">
        Built for AHS Class of 2028 • Futuristic glass UI • Edit data in <code>/data</code> on GitHub
      </div>
    </div>
  </footer>

  <!-- Toast placeholder -->
  <div id="toast" class="toast info hidden" role="status" aria-live="polite"></div>
<script>
function updateDateTime() {
  const now = new Date();
  document.getElementById("date").textContent = now.toLocaleDateString();
  document.getElementById("time").textContent = now.toLocaleTimeString();
}

setInterval(updateDateTime, 1000);
updateDateTime();
</script>

  <!-- scripts -->
  <script src="script.js"></script>
 <script>
    // --- helper: select ---
    const $ = (sel, el=document) => el.querySelector(sel);

    // --- mobile menu toggle ---
    const menuBtn = $('#menuBtn');
    const mobileMenu = $('#mobileMenu');
    const onToggleMenu = () => {
      const open = mobileMenu.classList.toggle('hidden');
      menuBtn.setAttribute('aria-expanded', String(!open));
    };
    if (menuBtn) menuBtn.addEventListener('click', onToggleMenu);
    document.addEventListener('click', (e)=>{
      if (!mobileMenu.classList.contains('hidden')){
        const clickedOutside = !mobileMenu.contains(e.target) && !menuBtn.contains(e.target);
        if (clickedOutside) onToggleMenu();
      }
    });

    // --- live date + time (locked to America/New_York) ---
    const dtFormatDate = new Intl.DateTimeFormat('en-US', { timeZone: 'America/New_York', weekday:'long', year:'numeric', month:'long', day:'numeric' });
    const dtFormatTime = new Intl.DateTimeFormat('en-US', { timeZone: 'America/New_York', hour:'numeric', minute:'2-digit', second:'2-digit' });
    function updateDateTime(){
      const now = new Date();
      $('#date').textContent = dtFormatDate.format(now);
      $('#time').textContent = dtFormatTime.format(now) + ' ET';
    }
    updateDateTime();
    setInterval(updateDateTime, 1000);

    // --- countdown to end of school ---
    const hero = $('#home');
    const endIso = hero?.getAttribute('data-end-of-school') || '2026-06-19T18:00:00-04:00';
    const END = new Date(endIso).getTime();

    function pad2(n){ return String(n).padStart(2,'0'); }
    function updateCountdown(){
      const now = Date.now();
      let diff = END - now;
      if (diff <= 0){
        $('#cd-days').textContent = '0';
        $('#cd-hrs').textContent = '00';
        $('#cd-min').textContent = '00';
        $('#cd-sec').textContent = '00';
        return;
      }
      const d = Math.floor(diff / (1000*60*60*24));
      diff -= d * (1000*60*60*24);
      const h = Math.floor(diff / (1000*60*60));
      diff -= h * (1000*60*60);
      const m = Math.floor(diff / (1000*60));
      diff -= m * (1000*60);
      const s = Math.floor(diff / 1000);
      $('#cd-days').textContent = d;
      $('#cd-hrs').textContent = pad2(h);
      $('#cd-min').textContent = pad2(m);
      $('#cd-sec').textContent = pad2(s);
    }
    updateCountdown();
    setInterval(updateCountdown, 1000);

    // --- (optional) auth status injection (kept from your original) ---
    fetch('/auth/check')
      .then(res => res.ok ? res.json() : { loggedIn:false })
      .then(data => {
        if (data && data.loggedIn) {
          const links = document.querySelector('.links');
          if (links){
            links.insertAdjacentHTML('beforeend',
              `<span style="margin-left: 1rem; opacity:.9">Welcome, ${data.user.name}</span>
               <form action="/auth/logout" method="POST" style="display:inline;">
                 <button style="background:none; border:none; color:#f88; cursor:pointer;">Log Out</button>
               </form>`
            );
          }
        }
      }).catch(()=>{});
  </script>

  <!-- If you have a separate script.js, keep it below this line -->
  <script src="script.js"></script>
</body>
</html>


