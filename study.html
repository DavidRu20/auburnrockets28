<!doctype html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AHS Class of â€™28 â€” Study Hub</title>
  <meta name="theme-color" content="#0d6efd" />
  <!-- Your global styles (already in the site) -->
  <link rel="stylesheet" href="styles.css?v=25" />

  <style>
    /* ===== Study Hub â€” page-scoped polish (keeps your global theme) ===== */
    .study-hero{
      padding: 36px 18px 8px;
      text-align:center;
    }
    .study-hero h1{
      font-size: clamp(28px,3.8vw,44px);
      margin: 0 0 6px;
      background: linear-gradient(90deg, var(--blue-2), #fff);
      -webkit-background-clip:text; background-clip:text; color:transparent;
    }
    .study-hero p{ color: var(--muted); margin: 6px 0 18px; }

    .study-bar{
      display:flex; gap:10px; justify-content:center; flex-wrap:wrap;
      margin: 8px auto 14px; padding: 0 12px;
      max-width: 980px;
    }
    .study-search{
      flex: 1 1 320px; max-width: 520px; min-width: 240px;
      display:flex; align-items:center; gap:8px;
      background: var(--panel); border:1px solid var(--border);
      border-radius: 14px; padding: 10px 12px; box-shadow: var(--inner-1);
    }
    .study-search input{
      outline: none; border: none; background: transparent; color: var(--text);
      width: 100%;
    }
    .pill-tabs{
      display:flex; gap:8px; overflow:auto; padding-bottom: 2px;
      scrollbar-width: none;
    }
    .pill-tabs::-webkit-scrollbar{ display:none; }
    .pill{
      white-space:nowrap; padding:8px 12px; border-radius: 999px;
      border:1px solid var(--border); background: var(--panel);
      color: var(--muted); font-weight:700; cursor:pointer;
      transition: filter 160ms ease, background 160ms ease, color 160ms ease;
    }
    .pill:hover{ filter:brightness(1.05); color:var(--text); }
    .pill.active{
      color:#fff; border-color:transparent;
      background: linear-gradient(135deg, var(--blue), var(--blue-2));
      box-shadow: 0 10px 26px rgba(13,110,253,.30);
    }

    .section-wrap{ max-width: 1100px; margin: 0 auto; padding: 6px 18px 40px; }

    .subject-block{ margin-top: 18px; }
    .subject-header{
      display:flex; align-items:end; justify-content:space-between; gap:10px;
      margin: 8px 0 12px;
    }
    .subject-title{
      font-size: clamp(18px,2.2vw,22px); font-weight:900; letter-spacing:.2px;
    }
    .subject-sub{ color: var(--muted); font-size: 13px; }

    .card-grid{
      display:grid; gap:12px;
      grid-template-columns: repeat(4, minmax(0,1fr));
    }
    @media (max-width: 1020px){ .card-grid{ grid-template-columns: repeat(3,1fr);} }
    @media (max-width: 780px){ .card-grid{ grid-template-columns: repeat(2,1fr);} }
    @media (max-width: 520px){ .card-grid{ grid-template-columns: 1fr; } }

    .subcard{
      border:1px solid var(--border); border-radius: 14px;
      background: var(--panel); box-shadow: var(--shadow-1), var(--inner-1);
      padding: 12px; display:flex; gap:10px; align-items:center;
      transition: transform 200ms cubic-bezier(.2,.8,.2,1), outline 200ms;
      min-height: 68px;
    }
    .subcard:hover{ transform: translateY(-2px); outline:1px solid rgba(255,255,255,.10); }
    .subcard .icon{
      width: 36px; height: 36px; border-radius: 10px; display:grid; place-items:center;
      background: linear-gradient(135deg, var(--blue), var(--blue-2)); color:#fff; font-weight:900;
      flex: 0 0 36px;
    }
    .subcard .meta{ display:grid; gap:3px; }
    .subcard .name{ font-weight: 800; }
    .subcard .hint{ font-size: 12px; color: var(--muted); }

    .more-row{
      display:flex; justify-content:center; margin-top: 12px;
    }
    .ghost{
      display:inline-flex; align-items:center; gap:8px; height: 40px;
      border-radius: 12px; border:1px dashed var(--border); color: var(--text);
      background: transparent; padding: 0 14px; font-weight:800; cursor:pointer;
      transition: background 160ms ease, border-color 160ms ease;
    }
    .ghost:hover{ background: rgba(255,255,255,.04); border-color: rgba(255,255,255,.18); }

    /* little fade-in */
    .fade-in{ opacity:0; transform: translateY(8px); transition: opacity .45s ease, transform .45s ease; }
    .fade-in.show{ opacity:1; transform:none; }
  </style>
</head>
<body>
  <!-- ===== Site header / nav (same as the rest of your site) ===== -->
  <header class="header" role="banner">
    <nav class="nav" aria-label="Primary">
      <a class="brand" href="./" aria-label="AHS Class of 2028 â€” Home">
        <span class="logo" aria-hidden="true">A</span>
        AHS Class of â€™28
      </a>
      <div class="links" role="navigation">
        <a href="./">Home</a>
        <a href="./fundraisers.html">Fundraisers</a>
        <a href="./calendar.html">Calendar</a>
        <a href="./media.html">Media</a>
        <a href="./achievements.html">Achievements</a>
        <a href="./about.html">About</a>
        <a href="./contact.html">Contact</a>
        <a href="./merch.html">Shop</a>
        <a class="active" href="./study.html">Study</a>
        <a href="./community.html">Community</a>
        <a href="./auth.html">Sign Up</a>
      </div>
      <button id="menuBtn" class="menu-btn" aria-expanded="false" aria-controls="mobileMenu" aria-label="Open menu">â˜°</button>
    </nav>
    <div id="mobileMenu" class="mobile-menu hidden" role="dialog" aria-modal="true" aria-label="Mobile navigation">
      <a href="./">Home</a>
      <a href="./fundraisers.html">Fundraisers</a>
      <a href="./calendar.html">Calendar</a>
      <a href="./media.html">Media</a>
      <a href="./achievements.html">Achievements</a>
      <a href="./about.html">About</a>
      <a href="./contact.html">Contact</a>
      <a href="./merch.html">Shop</a>
      <a class="active" href="./study.html">Study</a>
      <a href="./community.html">Community</a>
      <a href="./auth.html">Sign Up</a>
      <div class="small" style="padding:8px 10px; opacity:.8">Tap outside to close</div>
    </div>
  </header>

  <!-- ===== Page hero ===== -->
  <section class="study-hero">
    <h1>Study Hub</h1>
    <p>Pick a subject, then open a sub-topic. Astronomer gives tips on each subpage.</p>

    <div class="study-bar">
      <div class="study-search">
        <span aria-hidden="true">ðŸ”Ž</span>
        <input id="search" type="search" placeholder="Search e.g. algebra, bio, trianglesâ€¦" />
      </div>

      <div class="pill-tabs" id="subjectTabs" role="tablist" aria-label="Subjects">
        <!-- Pills inserted by JS -->
      </div>
    </div>
  </section>

  <!-- ===== Subject â†’ subcategory cards ===== -->
  <div class="section-wrap">
    <div id="subjectBlocks"><!-- built by JS --></div>
  </div>

  <!-- Starfield (your script.js already draws this on some pages; optional here) -->
  <canvas id="starfield"></canvas>

  <!-- ===== Page JS (no libs) ===== -->
  <script>
    /* ----- Data: subjects â†’ subcategories (links point to your future pages) ----- */
    const SUBJECTS = [
      {
        id: "math", name: "Math", emoji: "ðŸ§®",
        subs: [
          { n:"Algebra I",      k:["linear","equations","functions"], href:"study/math/algebra-1.html" },
          { n:"Algebra II",     k:["quadratic","polynomial","exponential"], href:"study/math/algebra-2.html" },
          { n:"Geometry",       k:["triangles","circles","proofs"], href:"study/math/geometry.html" },
          { n:"Trigonometry",   k:["sine","cosine","tan","unit circle"], href:"study/math/trigonometry.html" },
          { n:"Pre-Calculus",   k:["limits","series","vectors"], href:"study/math/precalculus.html" },
          { n:"Calculus AB",    k:["derivatives","integrals"], href:"study/math/calculus-ab.html" },
          { n:"Calculus BC",    k:["series","parametric","polar"], href:"study/math/calculus-bc.html" },
          { n:"Statistics",     k:["probability","distributions","inference"], href:"study/math/statistics.html" },
          { n:"SAT / ACT Math", k:["sat","act","practice"], href:"study/math/sat-act.html" },
          { n:"Number Theory",  k:["mod","divisibility"], href:"study/math/number-theory.html" },
          { n:"Discrete Math",  k:["graphs","combinatorics"], href:"study/math/discrete.html" },
        ]
      },
      {
        id: "ela", name: "ELA", emoji: "ðŸ“š",
        subs: [
          { n:"Reading Strategies", k:["close reading","inference"], href:"study/ela/reading.html" },
          { n:"Writing & Grammar",  k:["syntax","sentences"], href:"study/ela/writing.html" },
          { n:"Rhetorical Analysis",k:["appeals","tone"], href:"study/ela/rhetorical.html" },
          { n:"Essay Types",       k:["argument","narrative"], href:"study/ela/essays.html" },
          { n:"Literary Devices",  k:["metaphor","symbolism"], href:"study/ela/lit-devices.html" },
          { n:"Research & MLA",    k:["citations","works cited"], href:"study/ela/research.html" },
        ]
      },
      {
        id: "science", name: "Science", emoji: "ðŸ§ª",
        subs: [
          { n:"Biology",         k:["cells","genetics","evolution"], href:"study/science/biology.html" },
          { n:"Chemistry",       k:["stoichiometry","periodic"], href:"study/science/chemistry.html" },
          { n:"Physics",         k:["motion","forces","energy"], href:"study/science/physics.html" },
          { n:"Earth Science",   k:["geology","weather"], href:"study/science/earth.html" },
          { n:"Environmental",   k:["ecosystems","sustainability"], href:"study/science/environmental.html" },
          { n:"Anatomy",         k:["systems","organs"], href:"study/science/anatomy.html" },
          { n:"AP Science Prep", k:["ap","review"], href:"study/science/ap-prep.html" },
        ]
      },
      {
        id: "tech", name: "Technology", emoji: "ðŸ’»",
        subs: [
          { n:"CS Fundamentals", k:["computers","binary"], href:"study/tech/cs-fundamentals.html" },
          { n:"Web (HTML/CSS)",  k:["frontend","web"], href:"study/tech/web-basics.html" },
          { n:"JavaScript",      k:["js","dom"], href:"study/tech/javascript.html" },
          { n:"Python",          k:["py","basics"], href:"study/tech/python.html" },
          { n:"Data & AI Basics",k:["ml","data"], href:"study/tech/ai-basics.html" },
          { n:"Cybersecurity",   k:["security","privacy"], href:"study/tech/cyber.html" },
        ]
      },
      {
        id: "arts", name: "Fine Arts", emoji: "ðŸŽµ",
        subs: [
          { n:"Band",            k:["winds","percussion"], href:"study/arts/band.html" },
          { n:"Choir",           k:["voice","harmony"], href:"study/arts/choir.html" },
          { n:"Music Theory",    k:["intervals","chords"], href:"study/arts/music-theory.html" },
          { n:"Studio Art",      k:["drawing","painting"], href:"study/arts/studio-art.html" },
          { n:"Graphic Design",  k:["layout","color"], href:"study/arts/graphic-design.html" },
        ]
      },
      {
        id: "lang", name: "Languages", emoji: "ðŸŒ",
        subs: [
          { n:"Spanish I",  k:["present tense","vocab"], href:"study/lang/spanish-1.html" },
          { n:"Spanish II", k:["past tense","culture"], href:"study/lang/spanish-2.html" },
          { n:"French I",   k:["prÃ©sent","vocab"], href:"study/lang/french-1.html" },
          { n:"French II",  k:["passÃ© composÃ©","culture"], href:"study/lang/french-2.html" },
        ]
      },
      {
        id: "history", name: "History / Social Studies", emoji: "ðŸ“œ",
        subs: [
          { n:"World History",   k:["ancient","modern"], href:"study/history/world.html" },
          { n:"US History",      k:["colonial","20th"], href:"study/history/us.html" },
          { n:"Civics / Gov",    k:["constitution","branches"], href:"study/history/civics.html" },
          { n:"Economics",       k:["supply","demand"], href:"study/history/econ.html" },
          { n:"Geography",       k:["maps","regions"], href:"study/history/geography.html" },
          { n:"Psychology",      k:["behavior","cognition"], href:"study/history/psych.html" },
        ]
      }
    ];

    /* ----- Build subject pills ----- */
    const tabs = document.getElementById('subjectTabs');
    SUBJECTS.forEach((s, i) => {
      const btn = document.createElement('button');
      btn.className = 'pill' + (i===0 ? ' active' : '');
      btn.textContent = s.name;
      btn.setAttribute('data-id', s.id);
      btn.addEventListener('click', () => activateSubject(s.id));
      tabs.appendChild(btn);
    });

    /* ----- Build subject sections with subcategory cards ----- */
    const blocks = document.getElementById('subjectBlocks');
    const SHOW_FIRST = 8; // how many cards visible before â€œSee moreâ€
    SUBJECTS.forEach(s => {
      const wrap = document.createElement('section');
      wrap.className = 'subject-block fade-in';
      wrap.id = `block-${s.id}`;
      wrap.innerHTML = `
        <div class="subject-header">
          <div>
            <div class="subject-title">${s.emoji} ${s.name}</div>
            <div class="subject-sub">Choose a sub-topic to open its page (Astronomer is built-in on each subpage).</div>
          </div>
        </div>
        <div class="card-grid" id="grid-${s.id}"></div>
        <div class="more-row">
          <button class="ghost" id="more-${s.id}">See more</button>
          <button class="ghost hidden" id="less-${s.id}">Show less</button>
        </div>
      `;
      blocks.appendChild(wrap);

      // render cards (hidden beyond SHOW_FIRST)
      const grid = wrap.querySelector(`#grid-${s.id}`);
      s.subs.forEach((sub, idx)=>{
        const a = document.createElement('a');
        a.className = 'subcard';
        if (idx >= SHOW_FIRST) a.classList.add('hidden');
        a.href = sub.href;
        a.innerHTML = `
          <div class="icon">â˜†</div>
          <div class="meta">
            <div class="name">${sub.n}</div>
            <div class="hint">${sub.k.slice(0,3).join(" â€¢ ")}</div>
          </div>
        `;
        grid.appendChild(a);
      });

      // wire See more / Show less
      const moreBtn = wrap.querySelector(`#more-${s.id}`);
      const lessBtn = wrap.querySelector(`#less-${s.id}`);
      moreBtn.addEventListener('click', ()=>{
        grid.querySelectorAll('.hidden').forEach(el=> el.classList.remove('hidden'));
        moreBtn.classList.add('hidden');
        lessBtn.classList.remove('hidden');
      });
      lessBtn.addEventListener('click', ()=>{
        [...grid.children].forEach((el, i)=> { if (i >= SHOW_FIRST) el.classList.add('hidden'); });
        lessBtn.classList.add('hidden');
        moreBtn.classList.remove('hidden');
        grid.scrollIntoView({behavior:'smooth', block:'start'});
      });
    });

    // show first section only
    function activateSubject(id){
      document.querySelectorAll('.pill').forEach(p=> p.classList.toggle('active', p.dataset.id===id));
      document.querySelectorAll('.subject-block').forEach(b=>{
        const show = b.id === `block-${id}`;
        b.style.display = show ? '' : 'none';
        if (show) requestAnimationFrame(()=> b.classList.add('show'));
      });
    }
    activateSubject(SUBJECTS[0].id);

    // search filters subcards within the active subject
    const search = document.getElementById('search');
    search.addEventListener('input', ()=>{
      const q = search.value.trim().toLowerCase();
      const activeId = document.querySelector('.pill.active')?.dataset.id;
      const grid = document.querySelector(`#grid-${activeId}`);
      const cards = [...grid.children];

      // if empty search â†’ restore to â€œSHOW_FIRSTâ€ state
      if (!q){
        cards.forEach((el, i)=> el.classList.toggle('hidden', i >= SHOW_FIRST));
        document.getElementById(`more-${activeId}`).classList.toggle('hidden', cards.length <= SHOW_FIRST);
        document.getElementById(`less-${activeId}`).classList.add('hidden');
        return;
      }

      // filter all visible; hide non-matches
      const matches = [];
      const subj = SUBJECTS.find(s=>s.id===activeId);
      cards.forEach((el, i)=>{
        const name = subj.subs[i].n.toLowerCase();
        const keys = (subj.subs[i].k||[]).join(" ").toLowerCase();
        const ok = name.includes(q) || keys.includes(q);
        el.classList.toggle('hidden', !ok);
        if (ok) matches.push(el);
      });

      // hide / show controls
      document.getElementById(`more-${activeId}`).classList.add('hidden');
      document.getElementById(`less-${activeId}`).classList.add('hidden');
    });

    // basic mobile menu hookup (same IDs your site uses)
    (function mobileMenuHook(){
      const btn = document.getElementById("menuBtn");
      const mm  = document.getElementById("mobileMenu");
      if (!btn || !mm) return;
      btn.addEventListener("click", ()=>{
        const hidden = mm.classList.toggle("hidden");
        btn.setAttribute("aria-expanded", !hidden);
      });
      document.addEventListener("click", (e)=>{
        if (!mm.contains(e.target) && e.target !== btn && !mm.classList.contains("hidden")){
          mm.classList.add("hidden"); btn.setAttribute("aria-expanded","false");
        }
      });
    })();
  </script>

  <!-- Your global scripts (toasts, starfield, theme toggle, etc.) -->
  <script src="script.js?v=25"></script>
</body>
</html>

