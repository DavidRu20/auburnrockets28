<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AHS Class of ’28</title>
  <meta name="theme-color" content="#0d6efd" />
  <link rel="stylesheet" href="styles.css" />

  <style>
    /* --- Header hardening: consistent layout + reliable mobile menu --- */
    .nav{ display:flex; align-items:center; justify-content:space-between; gap:12px; }
    .links{ display:flex; align-items:center; gap:16px; flex-wrap:nowrap; white-space:nowrap; }
    .menu-btn{ display:none; }
    @media (max-width:980px){
      .header .links{ display:none; }
      .menu-btn{
        display:inline-flex; align-items:center; justify-content:center;
        width:42px; height:42px; border-radius:12px; border:1px solid var(--border);
        background:var(--panel);
      }
    }
    .mobile-menu{
      position:fixed; inset:64px 10px auto 10px; z-index:9999;
      background:var(--panel); border:1px solid var(--border);
      border-radius:14px; box-shadow:var(--shadow-2); padding:12px;
      backdrop-filter:blur(10px);
    }
    .mobile-menu a{ display:block; padding:12px 10px; border-radius:10px; color:var(--text); }
    .mobile-menu a:hover{ background:rgba(255,255,255,.06); }
    .hidden{ display:none !important; }
    html.menu-open, body.menu-open { overflow:hidden; }

    /* Page base */
    body { color: var(--text); background: transparent; overflow-x:hidden; }
    #starfield{ position: fixed; inset:0; z-index:-1; pointer-events:none; display:block; }

    /* Main container spacing for hero */
    main{ padding: 0 18px 44px; }
  </style>
</head>
<body>

  <!-- Animated starfield background -->
  <canvas id="starfield" aria-hidden="true"></canvas>

  <!-- ============================ HEADER / NAV ============================ -->
  <header class="header" role="banner">
    <nav class="nav" aria-label="Primary">
      <a class="brand" href="./" aria-label="AHS Class of 2028 — Home">
        <span class="logo" aria-hidden="true">A</span>
        AHS Class of ’28
      </a>

      <!-- Desktop links -->
      <div class="links" role="navigation">
        <a class="active" href="./">Home</a>
        <a href="./fundraisers.html">Fundraisers</a>
        <a href="./calendar.html">Calendar</a>
        <a href="./media.html">Media</a>
        <a href="./achievements.html">Achievements</a>
        <a href="./about.html">About</a>
        <a href="./contact.html">Contact</a>
        <a href="./shop.html">Shop</a>
        <a href="./announcements.html">Announcements</a>
        <a href="./community.html">Community</a>
      </div>

      <!-- Mobile menu button -->
      <button id="menuBtn" class="menu-btn" aria-expanded="false"
              aria-controls="mobileMenu" aria-label="Open menu">☰</button>
    </nav>

    <!-- Mobile menu -->
    <div id="mobileMenu" class="mobile-menu hidden" role="dialog" aria-modal="true" aria-label="Mobile navigation">
      <a class="active" href="./">Home</a>
      <a href="./fundraisers.html">Fundraisers</a>
      <a href="./calendar.html">Calendar</a>
      <a href="./media.html">Media</a>
      <a href="./achievements.html">Achievements</a>
      <a href="./about.html">About</a>
      <a href="./contact.html">Contact</a>
      <a href="./shop.html">Shop</a>
      <a href="./announcements.html">Announcements</a>
      <a href="./community.html">Community</a>
      <div class="small" style="padding:8px 10px; opacity:.8">Tap outside to close</div>
    </div>
  </header>


  <!-- ============================== HERO ================================= -->
  <main role="main">
    <section
      class="hero"
      id="home"
      aria-labelledby="homeTitle"
      data-end-of-school="2026-06-19T18:00:00-04:00">
      <div class="card hover-up" style="max-width:820px; margin: 40px auto 0;">
        <h1 id="homeTitle">Auburn Class of ’28</h1>

        <!-- Live date/time (America/New_York) -->
        <p id="date" aria-live="polite">Loading date…</p>
        <p id="time" aria-live="polite">Loading time…</p>

        <!-- Countdown -->
        <div class="countdown" aria-label="Countdown to end of school">
          <div class="box" aria-label="Days remaining">
            <div class="num" id="cd-days">0</div>
            <div class="lbl">Days</div>
          </div>
          <div class="box" aria-label="Hours remaining">
            <div class="num" id="cd-hrs">00</div>
            <div class="lbl">Hours</div>
          </div>
          <div class="box" aria-label="Minutes remaining">
            <div class="num" id="cd-min">00</div>
            <div class="lbl">Minutes</div>
          </div>
          <div class="box" aria-label="Seconds remaining">
            <div class="num" id="cd-sec">00</div>
            <div class="lbl">Seconds</div>
          </div>
        </div>

        <!-- Quick actions -->
        <div class="inline" style="justify-content:center; margin-top:16px;">
          <a class="btn primary" href="./fundraisers.html">See What’s Live</a>
          <a class="btn" href="./calendar.html">Event Calendar</a>
        </div>
      </div>
    </section>

    <!-- ======================== STATUS / ANNOUNCEMENTS ==================== -->
    <section class="section">
      <div class="container">
        <div class="grid grid-2">
          <!-- Happening Now -->
          <article class="panel glass hover-up" aria-labelledby="nowTitle">
            <div class="fundraiser-header" style="display:flex;align-items:center;justify-content:space-between;">
              <h2 id="nowTitle" class="section-title">Happening Now</h2>
              <span class="badge live">LIVE</span>
            </div>
            <div class="card-list" id="nowList">
              <div class="small" style="color:var(--muted)">Nothing live yet. Check “Next Up”.</div>
            </div>
          </article>

          <!-- Next Up -->
          <article class="panel glass hover-up" aria-labelledby="nextTitle">
            <h2 id="nextTitle" class="section-title">Next Up</h2>
            <div id="nextContainer">
              <div class="small" style="color:var(--muted)">No upcoming fundraisers yet.</div>
            </div>
          </article>
        </div>
      </div>
    </section>

    <!-- ============================ QUICK LINKS =========================== -->
    <section class="section">
      <div class="container">
        <h2 class="section-title">Quick Links</h2>
        <p class="section-sub">Fast access to the most-used pages.</p>

        <div class="grid grid-3">
          <a class="panel hover-up" href="./fundraisers.html">
            <div class="chips"><span class="badge blue">Fundraisers</span></div>
            <h3 style="margin:8px 0 6px;">Current & Upcoming</h3>
            <p class="small">See what’s running, what’s next, and how to help.</p>
          </a>

          <a class="panel hover-up" href="./calendar.html">
            <div class="chips"><span class="badge">Calendar</span></div>
            <h3 style="margin:8px 0 6px;">Events & No-School Days</h3>
            <p class="small">Today highlighted • Next & previous events called out.</p>
          </a>

          <a class="panel hover-up" href="./media.html">
            <div class="chips"><span class="badge">Media</span></div>
            <h3 style="margin:8px 0 6px;">Photos & Videos</h3>
            <p class="small">Instagram + YouTube vibes • Submit for approval.</p>
          </a>
        </div>
      </div>
    </section>
  </main>

  <!-- ============================= FOOTER ================================ -->
  <footer class="footer">
    <div class="container">
      <div class="small">
        Built for AHS Class of 2028 • Futuristic glass UI • Edit data in <code>/data</code> on GitHub
      </div>
    </div>
  </footer>

  <!-- Toast placeholder -->
  <div id="toast" class="toast info hidden" role="status" aria-live="polite"></div>

  <!-- ============ Robust mobile menu (guarded; scroll-lock; desktop auto-close) ============ -->
  <script>
    (function(){
      const btn  = document.getElementById('menuBtn');
      const menu = document.getElementById('mobileMenu');
      if (!btn || !menu) return;
      if (btn.dataset.bound === "1") return; // avoid double-binding
      btn.dataset.bound = "1";

      const DESKTOP_W = 980;
      let open = false;
      function setOpen(v){
        open = v;
        menu.classList.toggle('hidden', !open);
        btn.setAttribute('aria-expanded', String(open));
        document.documentElement.classList.toggle('menu-open', open);
        document.body.classList.toggle('menu-open', open);
      }

      btn.addEventListener('click', (e)=>{ e.stopPropagation(); setOpen(!open); }, {passive:true});
      document.addEventListener('click', (e)=>{ if(open && !menu.contains(e.target) && e.target !== btn) setOpen(false); });
      document.addEventListener('keydown', (e)=>{ if (e.key === 'Escape') setOpen(false); });
      menu.addEventListener('click', (e)=>{ if (e.target.closest('a')) setOpen(false); });
      window.addEventListener('resize', ()=>{ if (innerWidth > DESKTOP_W) setOpen(false); });
    })();
  </script>

  <!-- Subtle starfield script (parallax + twinkle; respects reduced motion) -->
  <script>
    (function(){
      const canvas = document.getElementById('starfield');
      if (!canvas) return;
      const ctx = canvas.getContext('2d', { alpha: true });

      // Layers of stars for depth
      const LAYERS = [
        { count: 70,  speed: 0.03, size: [0.6, 1.2],  alpha: [0.10, 0.20] }, // far
        { count: 40,  speed: 0.06, size: [0.8, 1.6],  alpha: [0.12, 0.26] }, // mid
        { count: 18,  speed: 0.10, size: [1.2, 2.4],  alpha: [0.16, 0.32] }  // near
      ];
      const prefersReduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      let stars = [];
      let w = 0, h = 0, rafId = 0, last = performance.now();

      function rand(min, max){ return min + Math.random() * (max - min); }

      function makeStars(){
        stars = [];
        LAYERS.forEach((L, li) => {
          for (let i = 0; i < L.count; i++) {
            stars.push({
              x: Math.random() * w,
              y: Math.random() * h,
              r: rand(L.size[0], L.size[1]),
              a: rand(L.alpha[0], L.alpha[1]),
              tw: rand(0, Math.PI * 2), // twinkle phase
              spd: L.speed,
              layer: li
            });
          }
        });
      }

      function resize(){
        w = canvas.width = window.innerWidth * devicePixelRatio;
        h = canvas.height = window.innerHeight * devicePixelRatio;
        canvas.style.width = '100%';
        canvas.style.height = '100%';
        ctx.setTransform(1,0,0,1,0,0);
        ctx.scale(devicePixelRatio, devicePixelRatio);
        makeStars();
        drawStatic(); // immediate paint
      }

      function drawStatic(){
        ctx.clearRect(0, 0, w, h);
        for (const s of stars){
          ctx.globalAlpha = s.a;
          ctx.beginPath();
          ctx.arc(s.x, s.y, s.r, 0, Math.PI * 2);
          ctx.fillStyle = '#ffffff';
          ctx.fill();
        }
        ctx.globalAlpha = 1;
      }

      function tick(ts){
        const dt = Math.min(0.05, (ts - last) / 1000); // cap delta
        last = ts;
        ctx.clearRect(0, 0, w, h);

        for (const s of stars){
          // gentle parallax drift
          s.x += s.spd * 24 * dt;
          s.y += s.spd * 6  * dt;
          if (s.x > window.innerWidth) s.x = -2;
          if (s.y > window.innerHeight) s.y = -2;

          // twinkle
          s.tw += 0.8 * dt;
          const twinkle = 0.5 + 0.5 * Math.sin(s.tw + s.layer);
          const alpha = Math.max(0.08, Math.min(1, s.a * (0.85 + 0.25 * twinkle)));

          ctx.globalAlpha = alpha;
          ctx.beginPath();
          ctx.arc(s.x, s.y, s.r, 0, Math.PI * 2);
          ctx.fillStyle = '#ffffff';
          ctx.fill();
        }
        ctx.globalAlpha = 1;

        rafId = requestAnimationFrame(tick);
      }

      // Boot
      resize();
      window.addEventListener('resize', resize);

      if (!prefersReduce) {
        rafId = requestAnimationFrame(tick);
        document.addEventListener('visibilitychange', () => {
          if (document.hidden) cancelAnimationFrame(rafId);
          else { last = performance.now(); rafId = requestAnimationFrame(tick); }
        });
      } else {
        // Static sky if reduced motion
        drawStatic();
      }
    })();
  </script>

  <!-- scripts -->
  <script src="script.js" defer></script>
</body>
</html>

